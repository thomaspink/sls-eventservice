language: php
php: '7.0'
env:
  global:
    - "FTP_HOST=ftp://e39931-ftp.services.easyname.eu/"

cache:
  directories:
  - node_modules/
  - src/theme/core/vendor/

addons:
  ssh_known_hosts: $FTP_HOST

before_install:
  - sudo apt-get -qq update
  - sudo apt-get install -y lftp

script:
  - npm install

after_success:
  - lftp -c "open -u $FTP_USER,$FTP_PASSWORD $FTP_HOST; set ssl:verify-certificate no; mirror -R src/theme/ /wp-content/themes/"

notifications:
  email:
    recipients: office@lukasholzer.com
    on_success: never
    on_failure: always
